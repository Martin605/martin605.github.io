import{g as ee,f as R}from"./main-QcH0wFoH.js";import{V as te}from"./VContainer-BjaEAbdV.js";import{V as P}from"./VBtn-YNWuinus.js";import{e as z,V as D,o as ae,h as ne,b as se,n as ie,f as oe,j as le,m as re,p as ce,q as ue}from"./index-ildTMc41.js";import{g as M,p as U,e as O,d as me,c0 as de,u as W,c as n,X as Y,k as ve,j as q,c1 as fe,a as ye,a8 as ke,q as he,r as w,s as E,B as ge,c2 as be,v as Ve,Z as _e,x as Se,w as A,o as G,c3 as we,h as Ce,b as j,F as xe,c4 as Pe,D as Te,L as pe,O as V,P as k,Q as c,Y as $e,b$ as L,U as _,R as S,S as Be,W as Le}from"./index-BLOcidWb.js";import{u as De,m as Ee}from"./VGrid-BxSSpORy.js";import{V as Ie}from"./VAvatar-BlAGsW2a.js";import{V as Ne,a as Re,b as Ae}from"./VCard-CaXCEeGn.js";import{u as je,V as F,m as Fe}from"./VOverlay-jKlggE1j.js";import{f as ze}from"./forwardRefs-B931MWyl.js";const Me=U({actionText:String,bgColor:String,color:String,icon:ke,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...ye(),...Ee(),...fe({size:void 0}),...q()},"VEmptyState"),Ue=M()({name:"VEmptyState",props:Me(),emits:{"click:action":e=>!0},setup(e,o){let{emit:a,slots:t}=o;const{themeClasses:m}=O(e),{backgroundColorClasses:s,backgroundColorStyles:i}=me(()=>e.bgColor),{dimensionStyles:l}=De(e),{displayClasses:u}=de();function d(v){a("click:action",v)}return W(()=>{var C,$,b;const v=!!(t.actions||e.actionText),h=!!(t.headline||e.headline),T=!!(t.title||e.title),p=!!(t.text||e.text),g=!!(t.media||e.image||e.icon),f=e.size||(e.image?200:96);return n("div",{class:["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},m.value,s.value,u.value,e.class],style:[i.value,l.value,e.style]},[g&&n("div",{key:"media",class:"v-empty-state__media"},[t.media?n(D,{key:"media-defaults",defaults:{VImg:{src:e.image,height:f},VIcon:{size:f,icon:e.icon}}},{default:()=>[t.media()]}):n(Y,null,[e.image?n(Ie,{key:"image",src:e.image,height:f},null):e.icon?n(z,{key:"icon",color:e.color,size:f,icon:e.icon},null):void 0])]),h&&n("div",{key:"headline",class:"v-empty-state__headline"},[((C=t.headline)==null?void 0:C.call(t))??e.headline]),T&&n("div",{key:"title",class:"v-empty-state__title"},[(($=t.title)==null?void 0:$.call(t))??e.title]),p&&n("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:ve(e.textWidth)}},[((b=t.text)==null?void 0:b.call(t))??e.text]),t.default&&n("div",{key:"content",class:"v-empty-state__content"},[t.default()]),v&&n("div",{key:"actions",class:"v-empty-state__actions"},[n(D,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>{var y;return[((y=t.actions)==null?void 0:y.call(t,{props:{onClick:d}}))??n(P,{onClick:d},null)]}})])])}),{}}});function Oe(e){const o=E(e());let a=-1;function t(){clearInterval(a)}function m(){t(),Te(()=>o.value=e())}function s(i){const l=i?getComputedStyle(i):{transitionDuration:.2},u=parseFloat(l.transitionDuration)*1e3||200;if(t(),o.value<=0)return;const d=performance.now();a=window.setInterval(()=>{const v=performance.now()-d+u;o.value=Math.max(e()-v,0),o.value<=0&&t()},u)}return Pe(t),{clear:t,time:o,start:s,reset:m}}const We=U({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...ue({location:"bottom"}),...ce(),...re(),...le(),...q(),...xe(Fe({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Ye=M()({name:"VSnackbar",props:We(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:a}=o;const t=he(e,"modelValue"),{positionClasses:m}=ae(e),{scopeId:s}=je(),{themeClasses:i}=O(e),{colorClasses:l,colorStyles:u,variantClasses:d}=ne(e),{roundedClasses:v}=se(e),h=Oe(()=>Number(e.timeout)),T=w(),p=w(),g=E(!1),f=E(0),C=w(),$=ge(be,void 0);Ve(()=>!!$,()=>{const r=_e();Se(()=>{C.value=r.mainStyles.value})}),A(t,y),A(()=>e.timeout,y),G(()=>{t.value&&y()});let b=-1;function y(){h.reset(),window.clearTimeout(b);const r=Number(e.timeout);if(!t.value||r===-1)return;const x=we(p.value);h.start(x),b=window.setTimeout(()=>{t.value=!1},r)}function H(){h.reset(),window.clearTimeout(b)}function K(){g.value=!0,H()}function I(){g.value=!1,y()}function Q(r){f.value=r.touches[0].clientY}function X(r){Math.abs(f.value-r.changedTouches[0].clientY)>50&&(t.value=!1)}function Z(){g.value&&I()}const J=Ce(()=>e.location.split(" ").reduce((r,x)=>(r[`v-snackbar--${x}`]=!0,r),{}));return W(()=>{const r=F.filterProps(e),x=!!(a.default||a.text||e.text);return n(F,j({ref:T,class:["v-snackbar",{"v-snackbar--active":t.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},J.value,m.value,e.class],style:[C.value,e.style]},r,{modelValue:t.value,"onUpdate:modelValue":B=>t.value=B,contentProps:j({class:["v-snackbar__wrapper",i.value,l.value,v.value,d.value],style:[u.value],onPointerenter:K,onPointerleave:I},r.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:Q,onTouchend:X,onAfterLeave:Z},s),{default:()=>{var B,N;return[ie(!1,"v-snackbar"),e.timer&&!g.value&&n("div",{key:"timer",class:"v-snackbar__timer"},[n(oe,{ref:p,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":h.time.value},null)]),x&&n("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((B=a.text)==null?void 0:B.call(a))??e.text,(N=a.default)==null?void 0:N.call(a)]),a.actions&&n(D,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[n("div",{class:"v-snackbar__actions"},[a.actions({isActive:t})])]})]},activator:a.activator})}),ze({},T)}}),qe={class:"mb-4"},nt=pe({__name:"SubscriptionsList",setup(e){const o=w([]),a=w(),t=w({show:!1,color:"",message:""});G(async()=>{try{a.value=await ee();const i=await(await R("subscription_bill/subscriptions/",{method:"GET"})).json();o.value=i||[]}catch(s){console.error("Failed to load:",s)}});const m=async s=>{try{(await R(`subscription_bill/subscriptions/${s}/`,{method:"DELETE"})).ok&&(o.value=o.value.filter(l=>String(l.id)!==String(s)),t.value={show:!0,color:"success",message:"Subscription deleted successfully."})}catch(i){console.error("Failed to delete:",i)}};return(s,i)=>(k(),V(te,null,{default:c(()=>[$e("h1",qe,_(s.$t("subscriptions")),1),a.value&&a.value.is_superuser?(k(),V(P,{key:0,class:"mb-4",color:"primary",to:"/web/subscriptions/add"},{default:c(()=>[n(z,{left:""},{default:c(()=>i[1]||(i[1]=[S("mdi-plus")])),_:1}),S(" "+_(s.$t("add")),1)]),_:1})):L("",!0),o.value.length===0?(k(),V(Ue,{key:1,headline:s.$t("no_data"),text:s.$t("no_data_text"),title:s.$t("no_data_title")},null,8,["headline","text","title"])):L("",!0),n(Ne,null,{default:c(()=>[(k(!0),Be(Y,null,Le(o.value,(l,u)=>(k(),V(Re,{key:u,cols:"12",md:"4"},{default:c(()=>[n(Ae,{class:"mx-auto","max-width":"344",subtitle:l.description,title:l.name},{actions:c(()=>[n(P,{"prepend-icon":"mdi-eye",text:"View",to:`/web/subscriptions/${l.id}`},{default:c(()=>[S(_(s.$t("view")),1)]),_:2},1032,["to"]),a.value&&a.value.is_superuser?(k(),V(P,{key:0,"prepend-icon":"mdi-pencil",text:"Edit",to:`/web/subscriptions/${l.id}/edit`},{default:c(()=>[S(_(s.$t("edit")),1)]),_:2},1032,["to"])):L("",!0),a.value&&a.value.is_superuser?(k(),V(P,{key:1,"prepend-icon":"mdi-delete",text:"Delete",onClick:d=>m(l.id)},{default:c(()=>[S(_(s.$t("delete")),1)]),_:2},1032,["onClick"])):L("",!0)]),_:2},1032,["subtitle","title"])]),_:2},1024))),128))]),_:1}),n(Ye,{modelValue:t.value.show,"onUpdate:modelValue":i[0]||(i[0]=l=>t.value.show=l)},{default:c(()=>[S(_(t.value.message),1)]),_:1},8,["modelValue"])]),_:1}))}});export{nt as _};
